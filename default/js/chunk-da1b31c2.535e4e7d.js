(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da1b31c2","chunk-1f64b992","chunk-13305399","chunk-1c89dcc7"],{"26b2":function(e,t,n){"use strict";n("8a19")},3027:function(e,t,n){"use strict";n("8d0f")},"8a19":function(e,t,n){},"8d0f":function(e,t,n){},"8e28":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("b775");function a(e){return Object(o["a"])({url:"org.gocom.components.coframe.dict.DictManager.queryDictByDictType.biz.ext",method:"post",data:e})}},9704:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"tree"},[n("el-dialog",{attrs:{title:"添加管理员",visible:e.centerDialogVisible,width:"45%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[n("div",{staticClass:"dialog_wrap",staticStyle:{display:"flex"}},[n("div",{staticClass:"tree_wrap"},[n("mul1",{attrs:{isCheckbox:"",data:e.data_tree},on:{ok:e.choose1}})],1),n("div",{staticClass:"from_wrap"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"添加管理员"}},[n("el-input",{attrs:{disabled:"",placeholder:"请选择管理员"},on:{input:e.change1},model:{value:e.form.orgmanager_name,callback:function(t){e.$set(e.form,"orgmanager_name",t)},expression:"form.orgmanager_name"}})],1),n("el-form-item",{staticClass:"form-item",attrs:{label:"部门名称:"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},on:{input:e.change1},model:{value:e.form.orgname,callback:function(t){e.$set(e.form,"orgname",t)},expression:"form.orgname"}})],1),n("el-form-item",{staticClass:"form-item",attrs:{label:"部门编码:"}},[n("el-input",{attrs:{placeholder:"请填写部门编码"},on:{input:e.change1},model:{value:e.form.orgcode,callback:function(t){e.$set(e.form,"orgcode",t)},expression:"form.orgcode"}})],1),n("el-form-item",{attrs:{label:"部门类别"}},[n("el-select",{attrs:{placeholder:"请选择部门类别"},model:{value:e.form.orgtype,callback:function(t){e.$set(e.form,"orgtype",t)},expression:"form.orgtype"}},e._l(e.dic_data4,(function(e,t){return n("el-option",{key:t,attrs:{label:e.dictname,value:e.dictid}})})),1)],1),n("el-form-item",{attrs:{label:"部门描述"}},[n("el-input",{attrs:{type:"textarea"},on:{input:e.change1},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),n("div",{staticStyle:{display:"flex"}},[n("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.change}},[e._v("确 定")])],1)],1)])]),n("div",[n("Tree",{attrs:{isCheckbox:!0,data:e.data_tree},on:{add:e.add,dele:e.dele,ok:e.node_click}})],1),n("el-card",{staticClass:"box-card"},[n("el-form",{staticClass:"demo-form-inline",attrs:{size:"mini",inline:!0,model:e.formInline}},[n("el-form-item",{staticClass:"form-item",attrs:{label:"部门名称:"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.formInline.orgname,callback:function(t){e.$set(e.formInline,"orgname",t)},expression:"formInline.orgname"}})],1),n("el-form-item",{staticClass:"form-item",attrs:{label:"部门编码:"}},[n("el-input",{attrs:{placeholder:"请填写部门编码"},model:{value:e.formInline.orgcode,callback:function(t){e.$set(e.formInline,"orgcode",t)},expression:"formInline.orgcode"}})],1),n("el-form-item",{attrs:{label:"部门类别"}},[n("el-select",{attrs:{placeholder:"请选择部门类别"},model:{value:e.formInline.orgtype,callback:function(t){e.$set(e.formInline,"orgtype",t)},expression:"formInline.orgtype"}},e._l(e.dic_data4,(function(e,t){return n("el-option",{key:t,attrs:{label:e.dictname,value:e.dictid}})})),1)],1),n("el-form-item",{attrs:{label:"部门描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.formInline.remark,callback:function(t){e.$set(e.formInline,"remark",t)},expression:"formInline.remark"}})],1),n("el-form-item",{staticClass:"form-item",attrs:{label:""}},[n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"mini",type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1)])},a=[],r=n("99af"),l=n("b775");function i(e){return Object(l["a"])({url:"org.gocom.components.coframe.org.organization.deleteNode.biz.ext",method:"post",data:e})}function c(e){return Object(l["a"])({url:"org.gocom.components.coframe.org.organization.updateOrg.biz.ext",method:"post",data:e})}function d(e){return Object(l["a"])({url:"org.gocom.components.coframe.org.organization.addOrg.biz.ext",method:"post",data:e})}var s=n("a1c8"),g=n("bd5e"),u=n("8e28"),f={components:{Tree:r["default"],mul1:g["default"],mul:s["default"]},data:function(){return{num:!1,obj:"",form:{orgOrganization:{orgid:""}},orgmanager:"",centerDialogVisible:!1,now_orgid:"",parentId:"",dic_data4:"",page_size:7,total:100,formInline:{},data_tree:[]}},created:function(){var e=this;Object(u["a"])({dicttypeid:"COF_ORGTYPE"}).then((function(t){e.dic_data4=t.data}))},watch:{num:function(e){1==e&&this.dele_b()}},methods:{change1:function(){this.$forceUpdate()},dele_b:function(){var e=this,t={nodeId:this.obj.orgid,nodeType:"OrgOrganization",parentId:this.obj.orgOrganization.orgid,parentType:"OrgOrganization",isDeleteCascade:!0};i(t).then((function(t){e.num=!1}))},change:function(){var e=this;this.form.orgOrganization.orgid=this.parentId1;var t={orgOrganization:this.form};d(t).then((function(t){t.response.flag?(location.reload(),e.$message.success("添加成功"),e.centerDialogVisible=!1):e.$message.warning("添加失败")}))},choose1:function(e,t,n){console.log(e,t,n),this.form.orgmanager_name=t,console.log(this.form.orgmanager_name,"sssaaa"),this.form.orgmanager=n,this.form1=this.form,this.form={},this.form=this.form1},dele:function(e){var t=this;this.obj=e;var n=this;this.$confirm("此操作将永久删除".concat(e.nodeName,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.num=!0,location.reload(),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},add:function(e){console.log(e,"ddddd"),this.centerDialogVisible=!0,e.orgOrganization?(this.parentId1=e.orgid,console.log(e,"gggggggggggggg")):this.parentId1=""},node_click:function(e){this.now_orgid=e.orgid,this.parentId=e.orgOrganization.orgid,this.formInline=e,console.log(e,"快快快快快快")},onSubmit:function(){var e=this,t={orgOrganization:this.formInline};c(t).then((function(t){t.response.flag?e.$message.success("修改成功"):e.$message.warning("修改失败")}))}}},h=f,m=(n("cce1"),n("2877")),p=Object(m["a"])(h,o,a,!1,null,"229c80a0",null);t["default"]=p.exports},"99af":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("el-tree",{ref:"tree",attrs:{lazy:"","check-strictly":"",load:e.loadNode,props:e.props,"node-key":"nodeId","show-checkbox":e.isCheckbox,draggable:"","expand-on-click-node":!1,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.node_click,check:e.check,"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop,"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(o.label))]),!a.isLeaf&&a.orgOrganization?n("span",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.append(a)}}},[e._v("\n          添加\n        ")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(o,a)}}},[e._v("\n          删除\n        ")])],1):e._e()])}}])})],1)},a=[],r=(n("ac6a"),n("dd12")),l={data:function(){return{props:{label:"nodeName",children:"zones",isLeaf:"isLeaf",orgid:"orgid"}}},props:{is_dele:{default:!0,type:Boolean},isCheckbox:{default:!1,type:Boolean},data:{default:[],type:Array}},methods:{node_click:function(e){console.log(e,"iiii");var t="",n="";e.empid?(t=e.empid,n="empid"):(t=e.orgid,n="orgid"),this.$emit("click_node",t,n)},check:function(e,t){0!=t.checkedKeys.length&&this.$emit("ok",e)},loadNode:function(e,t){if(0===e.level){Object(r["c"])().then((function(e){return e.treeNodes.disabled=!0,t(e.treeNodes)}))}else setTimeout((function(){var n={nodeType:"OrgOrganization",nodeId:e.data.nodeId};Object(r["c"])(n).then((function(e){if(e.treeNodes.forEach((function(e){e.isLeaf&&(e.disabled=!0)})),!(e.treeNodes.length>=1))return t([]);t(e.treeNodes)}))}),500)},append:function(e){this.$emit("add",e)},remove:function(e,t){this.$emit("dele",t)},handleCheckChange:function(e,t){var n=this.$refs.tree.getCheckedNodes();this.select=n,n.length>1&&(this.$message.error("只能选择一个部门"),this.$refs.tree.setChecked(e,!1))},handleDragStart:function(e,t){console.log("drag start",e)},handleDragEnter:function(e,t,n){console.log("tree drag enter: ",t.label)},handleDragLeave:function(e,t,n){console.log("tree drag leave: ",t.label)},handleDragOver:function(e,t,n){console.log("tree drag over: ",t.label)},handleDragEnd:function(e,t,n,o){console.log("tree drag end: ",t&&t.label,n)},handleDrop:function(e,t,n,o){console.log("tree drop: ",t.label,n)},allowDrop:function(e,t,n){return"二级 3-1"!==t.data.label||"inner"!==n},allowDrag:function(e){return-1===e.data.label.indexOf("三级 3-2-2")}}},i=l,c=(n("26b2"),n("2877")),d=Object(c["a"])(i,o,a,!1,null,"118beca3",null);t["default"]=d.exports},a1c8:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("el-tree",{ref:"tree",attrs:{lazy:"","check-strictly":"",load:e.loadNode,props:e.props,"node-key":"nodeId","show-checkbox":e.isCheckbox,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{check:e.check,"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop,"check-change":e.handleCheckChange}})],1)},a=[],r=(n("ac6a"),n("dd12")),l={data:function(){return{props:{label:"nodeName",children:"zones",isLeaf:"isLeaf",orgid:"orgid"}}},props:{is_dele:{default:!0,type:Boolean},isCheckbox:{default:!1,type:Boolean},data:{default:[],type:Array}},methods:{loadNode:function(e,t){0===e.level?Object(r["b"])().then((function(e){return e.treeNodes[0].disabled=!1,t(e.treeNodes)})):setTimeout((function(){var n={nodeType:"OrgOrganization",nodeId:e.data.nodeId};Object(r["c"])(n).then((function(e){if(e.treeNodes.forEach((function(e){1==e.isLeaf&&(e.disabled=!0)})),!(e.treeNodes.length>=1))return t([]);t(e.treeNodes)}))}),200)},handleCheckChange:function(e,t){},check:function(e,t){var n=this.$refs.tree.getCheckedNodes();n.length>1&&(this.$message.error("只能选择一个部门"),this.$refs.tree.setCheckedKeys([])),1==t.checkedKeys.length&&this.$emit("ok",e.orgid,e.nodeName,e.nodeId)},handleDragStart:function(e,t){},handleDragEnter:function(e,t,n){console.log("tree drag enter: ",t.label)},handleDragLeave:function(e,t,n){console.log("tree drag leave: ",t.label)},handleDragOver:function(e,t,n){console.log("tree drag over: ",t.label)},handleDragEnd:function(e,t,n,o){console.log("tree drag end: ",t&&t.label,n)},handleDrop:function(e,t,n,o){console.log("tree drop: ",t.label,n)},allowDrop:function(e,t,n){return"二级 3-1"!==t.data.label||"inner"!==n},allowDrag:function(e){return-1===e.data.label.indexOf("三级 3-2-2")}}},i=l,c=(n("ca4c"),n("2877")),d=Object(c["a"])(i,o,a,!1,null,"74075e22",null);t["default"]=d.exports},bd5e:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("el-tree",{ref:"tree",attrs:{lazy:"","check-strictly":"",load:e.loadNode,props:e.props,"node-key":"nodeId","show-checkbox":e.isCheckbox,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{check:e.check,"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop,"check-change":e.handleCheckChange}})],1)},a=[],r=(n("ac6a"),n("dd12")),l={data:function(){return{props:{label:"nodeName",children:"zones",isLeaf:"isLeaf",orgid:"orgid"}}},props:{is_dele:{default:!0,type:Boolean},isCheckbox:{default:!1,type:Boolean},data:{default:[],type:Array}},methods:{loadNode:function(e,t){0===e.level?Object(r["c"])().then((function(e){return e.treeNodes[0].disabled=!0,t(e.treeNodes)})):setTimeout((function(){var n={nodeType:"OrgOrganization",nodeId:e.data.nodeId};Object(r["c"])(n).then((function(e){if(e.treeNodes.forEach((function(e){0==e.isLeaf&&(e.disabled=!0)})),!(e.treeNodes.length>=1))return t([]);t(e.treeNodes)}))}),200)},handleCheckChange:function(e,t){},check:function(e,t){var n=this.$refs.tree.getCheckedNodes();n.length>1&&(this.$message.error("只能选择一个部门"),this.$refs.tree.setCheckedKeys([])),1==t.checkedKeys.length&&this.$emit("ok",e.orgid,e.nodeName,e.empid)},handleDragStart:function(e,t){console.log("drag start",e)},handleDragEnter:function(e,t,n){console.log("tree drag enter: ",t.label)},handleDragLeave:function(e,t,n){console.log("tree drag leave: ",t.label)},handleDragOver:function(e,t,n){console.log("tree drag over: ",t.label)},handleDragEnd:function(e,t,n,o){console.log("tree drag end: ",t&&t.label,n)},handleDrop:function(e,t,n,o){console.log("tree drop: ",t.label,n)},allowDrop:function(e,t,n){return"二级 3-1"!==t.data.label||"inner"!==n},allowDrag:function(e){return-1===e.data.label.indexOf("三级 3-2-2")}}},i=l,c=(n("3027"),n("2877")),d=Object(c["a"])(i,o,a,!1,null,"5419b066",null);t["default"]=d.exports},ca4c:function(e,t,n){"use strict";n("e2fe")},cce1:function(e,t,n){"use strict";n("d2bb")},d2bb:function(e,t,n){},dd12:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return i}));var o=n("b775");function a(){return Object(o["a"])({url:"org.gocom.components.coframe.auth.partyauth.ManageableRes.getManageableOrg.biz.ext",method:"post"})}function r(e){return Object(o["a"])({url:"org.gocom.components.coframe.org.organization.queryTreeChildNodes.biz.ext",method:"post",data:e})}function l(e){return Object(o["a"])({url:"org.gocom.components.coframe.framework.SystemManager.querySystemByCriteria.biz.ext",method:"post",data:e})}function i(e){return Object(o["a"])({url:"org.gocom.components.coframe.org.organization.queryOrgTree.biz.ext",method:"post",data:e})}},e2fe:function(e,t,n){}}]);
//# sourceMappingURL=chunk-da1b31c2.535e4e7d.js.map