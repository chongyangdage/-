(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-615ea619"],{"4add":function(e,t,a){},"4d2f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-tree",{ref:"tree",attrs:{lazy:"","check-strictly":"",load:e.loadNode,props:e.props,"node-key":"nodeId","show-checkbox":e.isCheckbox,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.node_click,check:e.check,"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop,"check-change":e.handleCheckChange}})],1)},o=[],i=a("dd12"),r={data:function(){return{props:{label:"nodeName",children:"zones",isLeaf:"isLeaf",orgid:"orgid"}}},props:{is_dele:{default:!0,type:Boolean},isCheckbox:{default:!1,type:Boolean},data:{default:[],type:Array}},methods:{node_click:function(e){console.log(e,"sss"),this.$emit("click_node",e.orgid)},loadNode:function(e,t){0===e.level?Object(i["d"])().then((function(e){return e.treeNodes[0].disabled=!0,t(e.treeNodes)})):setTimeout((function(){var a={nodeType:"OrgOrganization",nodeId:e.data.nodeId};Object(i["d"])(a).then((function(e){if(!(e.treeNodes.length>=1))return t([]);t(e.treeNodes)}))}),200)},handleCheckChange:function(e,t){},check:function(e,t){var a=this.$refs.tree.getCheckedNodes();a.length>1&&(this.$message.error("只能选择一个部门"),this.$refs.tree.setCheckedKeys([])),1==t.checkedKeys.length&&this.$emit("ok",e.orgid,e.nodeName,e.empid)},handleDragStart:function(e,t){console.log("drag start",e)},handleDragEnter:function(e,t,a){console.log("tree drag enter: ",t.label)},handleDragLeave:function(e,t,a){console.log("tree drag leave: ",t.label)},handleDragOver:function(e,t,a){console.log("tree drag over: ",t.label)},handleDragEnd:function(e,t,a,n){console.log("tree drag end: ",t&&t.label,a)},handleDrop:function(e,t,a,n){console.log("tree drop: ",t.label,a)},allowDrop:function(e,t,a){},allowDrag:function(e){}}},l=r,d=(a("e6f8"),a("2877")),s=Object(d["a"])(l,n,o,!1,null,"41194d74",null);t["default"]=s.exports},"7c50":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-tree",{ref:"tree",attrs:{lazy:"",load:e.loadNode,props:e.props,"node-key":"nodeId","show-checkbox":e.isCheckbox,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.node_click,check:e.check,"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop,"check-change":e.handleCheckChange}})],1)},o=[],i=(a("ac6a"),a("dd12")),r={data:function(){return{props:{label:"nodeName",children:"zones",isLeaf:"isLeaf",orgid:"orgid"}}},props:{is_dele:{default:!0,type:Boolean},isCheckbox:{default:!1,type:Boolean},data:{default:[],type:Array}},methods:{node_click:function(e){var t="",a="";e.empid?(t=e.empid,a="empid"):(t=e.orgid,a="orgid"),this.$emit("click_node",t,a)},loadNode:function(e,t){0===e.level?Object(i["c"])().then((function(e){return e.treeNodes[0].disabled=!0,t(e.treeNodes)})):setTimeout((function(){var a={nodeType:"OrgOrganization",nodeId:e.data.nodeId};Object(i["c"])(a).then((function(e){if(e.treeNodes.forEach((function(e){0==e.isLeaf&&(e.disabled=!0)})),!(e.treeNodes.length>=1))return t([]);t(e.treeNodes)}))}),200)},handleCheckChange:function(e,t){},check:function(e,t){var a=this.$refs.tree.getCheckedNodes();a.length>1&&(this.$message.error("只能选择一个部门"),this.$refs.tree.setCheckedKeys([])),1==t.checkedKeys.length&&this.$emit("ok",e.orgid,e.nodeName,e.empid)},handleDragStart:function(e,t){console.log("drag start",e)},handleDragEnter:function(e,t,a){console.log("tree drag enter: ",t.label)},handleDragLeave:function(e,t,a){console.log("tree drag leave: ",t.label)},handleDragOver:function(e,t,a){console.log("tree drag over: ",t.label)},handleDragEnd:function(e,t,a,n){console.log("tree drag end: ",t&&t.label,a)},handleDrop:function(e,t,a,n){console.log("tree drop: ",t.label,a)},allowDrop:function(e,t,a){return"二级 3-1"!==t.data.label||"inner"!==a},allowDrag:function(e){return-1===e.data.label.indexOf("三级 3-2-2")}}},l=r,d=(a("d321"),a("2877")),s=Object(d["a"])(l,n,o,!1,null,"3bef7a1a",null);t["default"]=s.exports},9711:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Mynewsup",{directives:[{name:"show",rawName:"v-show",value:!e.is_change,expression:"!is_change"}],attrs:{is_mytest:!1}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.is_change,expression:"is_change"}]},[a("el-dialog",{attrs:{title:"单位用户变动",visible:e.centerDialogVisible,width:"45%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{staticClass:"dialog_wrap",staticStyle:{display:"flex"}},[a("div",{staticClass:"tree_wrap"},[a("Tree1",{attrs:{isCheckbox:"",data:e.data_tree},on:{ok:e.choose}})],1),a("div",{staticClass:"from_wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"变动用户"}},[a("el-input",{attrs:{disabled:"",placeholder:""},model:{value:e.changeUser,callback:function(t){e.changeUser=t},expression:"changeUser"}})],1)],1),a("div",{staticStyle:{display:"flex"}},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.change}},[e._v("确 定")])],1)],1)])]),a("el-form",{staticClass:"demo-form-inline",attrs:{size:"mini",inline:!0,model:e.formInline}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"姓名:"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formInline.empname,callback:function(t){e.$set(e.formInline,"empname",t)},expression:"formInline.empname"}})],1),a("el-form-item",{attrs:{prop:"degree",label:"职务类别"}},[a("el-select",{attrs:{placeholder:"请选择职务类别"},model:{value:e.formInline.degree,callback:function(t){e.$set(e.formInline,"degree",t)},expression:"formInline.degree"}},e._l(e.dic_data3,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dictname,value:e.dictid}})})),1)],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"警号/辅警号:"}},[a("el-input",{attrs:{placeholder:"请填写警号/辅警号"},model:{value:e.formInline.empcode,callback:function(t){e.$set(e.formInline,"empcode",t)},expression:"formInline.empcode"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"证件号:"}},[a("el-input",{attrs:{placeholder:"请填写身份证号"},model:{value:e.formInline.cardno,callback:function(t){e.$set(e.formInline,"cardno",t)},expression:"formInline.cardno"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"E-Mail:"}},[a("el-input",{attrs:{placeholder:"请填写邮箱号"},model:{value:e.formInline.oemail,callback:function(t){e.$set(e.formInline,"oemail",t)},expression:"formInline.oemail"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("div",{staticClass:"tree"},[a("div",[a("Tree",{attrs:{data:e.data_tree},on:{click_node:e.node_click}})],1),a("div",{staticClass:"table"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"title"},[e._v("用户信息列表")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.add_people}},[e._v("新增人员")]),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,border:!0,size:"mini",data:e.tableData}},[a("el-table-column",{attrs:{width:"130",align:"center",prop:"orgid",label:"所属单位"}}),a("el-table-column",{attrs:{width:"80",align:"center",prop:"empname",label:"真实姓名"}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"empcode",label:"警号/辅警号"}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"degree",label:"职务"}}),a("el-table-column",{attrs:{width:"160",align:"center",prop:"oemail",label:"电子邮箱"}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"mobileno",label:"手机号"}}),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleChange(t.row.empid,t.row.orgid,t.row.empname)}}},[e._v("变动")]),a("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDele(t.row.empid,t.row.orgid)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",pageSize:e.page_size,total:e.total},on:{"current-change":e.currentChange,"prev-click":e.prev_click,"next-click":e.next_click}})],1)],1)],1)])],1)],1)},o=[],i=a("4d2f"),r=a("7c50"),l=a("0e4f"),d=a("2fda"),s=a("8e28"),c={components:{Tree:r["default"],Tree1:i["default"],Mynewsup:l["default"]},data:function(){return{show:!0,idd:"",dic_data3:"",empid:"",orgid:"",new_orgin:"",changeUser:"刘德华",is_change:!0,centerDialogVisible:!1,form:{region:""},page:1,page_size:2,total:0,formInline:{},data_tree:[],tableData:[]}},created:function(){var e=this;Object(s["a"])({dicttypeid:"COF_DUTIES"}).then((function(t){e.dic_data3=t.data}))},methods:{add_people:function(){this.$router.push({path:"/register"})},choose:function(e){this.new_orgin=e},change:function(){var e=this,t={dragNodeId:this.empid,dragNodeType:"OrgEmployee",dropNodeType:"OrgOrganization",dragParentNodeId:this.orgid,dragParentNodeType:"OrgOrganization",dropNodeId:this.new_orgin};Object(d["c"])(t).then((function(t){1==t.result?(e.$message.success("变动成功"),e.centerDialogVisible=!1):e.$message.warning("变动失败")}))},node_click:function(e,t){var a=this;if(this.show=!0,"empid"==t){var n={criteria:{_expr:[{empid:e,_op:"="}]}};Object(d["a"])(n).then((function(e){a.tableData=e.data,a.total=e.page.count}))}else this.idd=e,this.p_data(this.idd)},p_data:function(e){var t=this,a={criteria:{_expr:[{orgid:e,_op:"="}]},page:{length:this.page_size,isCount:!0,begin:this.page}};Object(d["a"])(a).then((function(e){t.tableData=e.data,t.total=e.page.count}))},handleEdit:function(e){this.is_change=!1},handleChange:function(e,t,a){this.changeUser=a,this.empid=e,this.orgid=t,this.centerDialogVisible=!0},handleDele:function(e,t){var a=this,n={nodeId:e,parentId:t,nodeType:"OrgEmployee",parentType:"OrgOrganization",isDeleteCascade:!0};Object(d["e"])(n).then((function(e){1==e.returnCode?a.$message.success("删除成功"):a.$message.warning("删除失败")}))},prev_click:function(e){this.page=e,this.show?this.p_data(this.idd):this.onSubmit()},next_click:function(e){this.page=e,this.show?this.p_data(this.idd):this.onSubmit()},currentChange:function(e){this.page=e,this.show?this.p_data(this.idd):this.onSubmit()},onSubmit:function(){var e=this;this.show=!1,this.formInline._op="=";var t={criteria:{_expr:[this.formInline]},page:{length:this.page_size,isCount:!0,begin:this.page}};Object(d["a"])(t).then((function(t){e.tableData=t.data,e.total=t.page.count}))}}},h=c,g=(a("c5b0"),a("2877")),p=Object(g["a"])(h,n,o,!1,null,"df71ebb8",null);t["default"]=p.exports},baa1:function(e,t,a){},bdea:function(e,t,a){},c5b0:function(e,t,a){"use strict";a("4add")},d321:function(e,t,a){"use strict";a("bdea")},e6f8:function(e,t,a){"use strict";a("baa1")}}]);
//# sourceMappingURL=chunk-615ea619.aa768334.js.map